<app-home-template>
  <div class="flex flex-col gap-5 min-w-[700px]">
    <div>
      <h3 class="text-2xl font-medium mt-2 mb-0">Welcome, Admin!</h3>
    </div>
    <div class="grid xl:grid-cols-3 lg:grid-cols-2 grid-cols-1 gap-5">
      <div
        class="min-w-[350px] h-[150px] rounded-xl bg-white flex flex-col border-solid border-[1px] border-gray-300 p-6 gap-4"
      >
        <div class="pb-2 w-full flex items-center justify-between">
          <div class="flex items-center gap-5 font-semibold">
            <i class="pi pi-ticket text-base bg-gray-100 px-1 rounded-md"></i>
            <p class="font-medium">Total Tickets Sold</p>
          </div>
          <i
            class="pi pi-info-circle text-xl opacity-50"
            pTooltip="Total tickets sold in the system."
            tooltipPosition="left"
          ></i>
        </div>
        <div class="flex flex-1 w-full items-center gap-6">
          <p class="text-4xl font-medium">
            {{ getTotalSoldTickets() }}
          </p>
          <div
            class="flex items-center justify-center gap-2 px-2 py-1 rounded-md bg-green-200 text-green-700"
          >
            <p class="text-xs">25.1%</p>
            <i class="pi pi-arrow-up-right text-xs"></i>
          </div>
        </div>
      </div>
      <div
        class="min-w-[350px] h-[150px] rounded-xl bg-white flex flex-col border-solid border-[1px] border-gray-300 p-6"
      >
        <div class="pb-2 w-full flex items-center justify-between">
          <div class="flex items-center gap-5 font-semibold">
            <i class="pi pi-dollar text-base bg-gray-100 px-1 rounded-md"></i>
            <p class="font-medium">Total Revenue</p>
          </div>
          <i
            class="pi pi-info-circle text-xl opacity-50"
            pTooltip="Total revenue generated from ticket sales in the system."
            tooltipPosition="left"
          ></i>
        </div>
        <div class="flex flex-1 w-full items-center gap-6">
          <p class="text-4xl font-medium">
            {{ "Rs. " + (getTotalRevenue() | number : "1.0-0") }}
          </p>
          <div
            class="flex items-center justify-center gap-2 px-2 py-1 rounded-md bg-green-200 text-green-700"
          >
            <p class="text-xs">12.7%</p>
            <i class="pi pi-arrow-up-right text-xs"></i>
          </div>
        </div>
      </div>
      <div
        class="min-w-[350px] h-[150px] rounded-xl bg-white flex flex-col border-solid border-[1px] border-gray-300 p-6"
      >
        <div class="pb-2 w-full flex items-center justify-between">
          <div class="flex items-center gap-5 font-semibold">
            <i class="pi pi-user text-base bg-gray-100 px-1 rounded-md"></i>
            <p class="font-medium">Total Users</p>
          </div>
          <i
            class="pi pi-info-circle text-xl opacity-50"
            pTooltip="The total number of users registered in the system."
            tooltipPosition="left"
          ></i>
        </div>
        <div class="flex flex-1 w-full items-center gap-6">
          <p class="text-4xl font-medium">
            {{ getTotalUsers() }}
          </p>
          <div
            class="flex items-center justify-center gap-2 px-2 py-1 rounded-md bg-red-200 text-red-700"
          >
            <p class="text-xs">4.9%</p>
            <i class="pi pi-arrow-down-right text-xs"></i>
          </div>
        </div>
      </div>
    </div>
    <div class="grid xl:grid-cols-2 grid-cols-1 gap-5">
      <div
        class="min-w-[350px] h-[460px] rounded-xl bg-white flex flex-col border-solid border-[1px] border-gray-300 p-6 pb-14 gap-5"
      >
        <div class="pb-2 w-full flex items-center justify-between mb-5">
          <div class="flex items-center gap-5 font-semibold">
            <i
              class="pi pi-chart-line text-base bg-gray-100 px-1 rounded-md"
            ></i>
            <p class="font-medium">Ticket Summary</p>
          </div>
          <i
            class="pi pi-info-circle text-xl opacity-50"
            pTooltip="Chart representing the total tickets sold and remaining."
            tooltipPosition="left"
          ></i>
        </div>
        <div class="flex w-full items-center gap-12 px-5">
          <div class="flex flex-col gap-2">
            <div class="flex gap-2 items-center">
              <div class="w-2 h-5 rounded-full bg-blue-500"></div>
              <p class="text-gray-600 leading-[1]">Tickets Sold</p>
            </div>
            <p class="text-2xl font-semibold pl-4">
              {{ getTotalSoldTickets() }}
            </p>
          </div>
          <div class="flex flex-col gap-2">
            <div class="flex gap-2 items-center">
              <div class="w-2 h-5 rounded-full bg-gray-300"></div>
              <p class="text-gray-600 leading-[1]">Tickets Remaining</p>
            </div>
            <p class="text-2xl font-semibold pl-4">
              {{ getTotalAvailableTickets() }}
            </p>
          </div>
        </div>
        <div class="mt-5">
          <app-pie-chart
            [value1]="getTotalSoldTickets()"
            [value2]="getTotalAvailableTickets()"
            class="flex justify-center items-center"
          ></app-pie-chart>
        </div>
      </div>
      <div
        class="min-w-[350px] h-[460px] rounded-xl bg-white flex flex-col border-solid border-[1px] border-gray-300 p-6 gap-5"
      >
        <div class="pb-2 w-full flex items-center justify-between mb-5">
          <div class="flex items-center gap-5 font-semibold">
            <i class="pi pi-calendar text-base bg-gray-100 px-1 rounded-md"></i>
            <p class="font-medium">Active Events</p>
          </div>
          <i
            class="pi pi-info-circle text-xl opacity-50"
            pTooltip="The list of the recent active events in the system."
            tooltipPosition="left"
          ></i>
        </div>
        <div class="flex flex-col flex-1 gap-5">
          <div
            class="h-16 w-full flex items-center justify-between bg-gray-100 rounded-xl py-2 px-6"
            *ngFor="let event of getRecentEvents()"
          >
            <div class="flex flex-col">
              <p
                class="text-lg font-medium max-w-[150px] line-clamp-1 text-ellipsis"
              >
                {{ event.name }}
              </p>
              <p
                class="text-sm text-gray-500 leading-tight max-w-[150px] line-clamp-1 text-ellipsis"
              >
                {{ "Date: " + (event.date | date) }}
              </p>
            </div>
            <div class="flex items-center gap-5">
              <p>
                <span class="text-gray-500">Tickets Sold: </span
                >{{ getTicketsSoldPercentage(event.id!).toFixed(2) + "%" }}
              </p>
              <div class="relative h-4 w-[200px] bg-gray-200 rounded-full">
                <div
                  class="absolute h-4 rounded-full bg-blue-500"
                  [style.width]="getTicketsSoldPercentage(event.id!) + '%'"
                ></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</app-home-template>
